---
title: "Covid-19 outbreak and its economic impacts: An interactive exploration on Indonesian provincial data"
author: "Harry Aginta, Ragdad Chani, Carlos Mendez"
output: 
  html_notebook:
    toc: true
    toc_float:
      collapsed: false
      smooth_scroll: false
    toc_depth: 4
    number_sections: true
    code_folding: "show"
    theme: "cosmo"
    highlight: "monochrome"
    df_print: "kable"
  github_document: default
---

<style>
h1.title {font-size: 18pt; color: DarkBlue;} 
body, h1, h2, h3, h4 {font-family: "Palatino", serif;}
body {font-size: 12pt;}
/* Headers */
h1,h2,h3,h4,h5,h6{font-size: 14pt; color: #00008B;}
body {color: #333333;}
a, a:hover {color: #8B3A62;}
pre {font-size: 12px;}
</style>

```{r setup, include=TRUE}
knitr::opts_chunk$set(
  echo = TRUE,
  message = FALSE,
  warning = FALSE
)
library(tidyverse)
library(ExPanDaR)   
library(sf)         # Simple features for R
library(tmap)       # Thematic Maps
library(ggplot2)
library(tmaptools)
library(leaflet)

options(prompt="R> ", digits=3, scipen=999)
```

Suggested Citation: 

> Harry, A. Chani, R, Mendez, C (2020). _Covid-19 outbreak and its economic impacts: An interactive exploration on Indonesian provincial data._ Available at ......

This work is licensed under the Creative Commons Attribution-Share Alike 4.0 International License. 
![](CCLicense.png)

# Load non-spatial data

```{r}
library(readxl)
data <- read_excel("explore expandr.xlsx", 
    sheet = "Sheet1")
View(data)
```

```{r}
df <- data[,colSums(is.na(data))<nrow(data)]
```

```{r}
df1 <- df %>% select(-c(3:6,8:11))
```

# Import dataframe of definitions
```{r}
#df_definitions <- read_csv("df_def.csv") 
#df_definitions
```

# Load shape file Indonesian provinces
```{r}
map <- read_sf("province border.shp")
```

# Merge non-spatial data with spatial data
```{r}
covid_map <- inner_join(
  df1,
  map,
  by = "ID"
)
```

```{r}
covid_map
```


# Keep data as sf object
```{r}
covid_map1 <- st_as_sf(covid_map)
```

# Map cumulative Covid-19 case by province (by the end of June 2020)
```{r}
qtm(covid_map1, fill = "rate_chg")
```

```{r}
tm_shape(covid_map1) +
  tm_polygons("rate_chg", id = "province", pallete = "blue")
```

# Interactive map
```{r}
tmap_mode("view")
tmap_last()
```



# Map economic growth Q2-2020 by province
```{r}
#qtm(covid_map, fill = "rate_chg")
```

```{r eval=FALSE, include=T}
# Run it in the console
ExPanD(
  df,
  #df_def = df_definitions,
  export_nb_option = TRUE,
  title = "Covid-19 and its economic impacts: An interactive exploration on Indonesian provincial data",
  abstract = paste("The coronavirus (COVID-19) outbreak that led to a serious global health crisis has brought major disruptions on the economy in many countries, including Indonesia. 
First identified in March 2020, the corona virus has shown negative impact on Indonesian economy in Q1-2020. Yet the situation is even worse in Q2. This web application provides handy interactive exploration on the economic impacts of Covid-19 across Indonesian provinces.
</br>
</br>
Suggested citation: Harry, A. Chani, R, and Mendez, C. (2020). Covid-19 and its economic impacts: An interactive exploration on Indonesian provincial data")
  )
```

```{r}
config_list_fromRDS <- readRDS("ExPanD.RDS")
```

```{r eval=FALSE, include=T}
# Run it in the console
ExPanD(
  gapmainder2007,
  df_def = df_definitions,
  export_nb_option = TRUE,
  config_list = config_list_fromRDS,
  title = "Cross-sectional exploration",
  abstract = paste("The relationship between life expectancy and GDP per capita")
  )
```

# Interactive exploration

> <https://carlosmendez777.shinyapps.io/short-project-explore-cross-section-interactively>

# References

- <https://joachim-gassen.github.io/ExPanDaR/>
- <https://cran.r-project.org/web/packages/ExPanDaR/index.html>