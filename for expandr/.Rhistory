st_crs(mapData)
dat_map <- inner_join(
dat,
mapData,
by = "id"
)
dat_map <- st_as_sf(dat_map)
st_crs(mapData)
glimpse(dat_map)
qtm(dat_map, fill = "T")
tm_shape(dat_map) + tm_fill("T")
tm_shape(dat_map) +
tm_fill("T") +
tm_layout(frame = FALSE)
tm_shape(dat_map) + tm_fill("T") +
tm_layout(legend.outside = TRUE, frame = FALSE)
tm_shape(dat_map) + tm_fill("T") +
tm_layout(legend.outside = TRUE, frame = FALSE) +
tm_legend(text.size = 0.3)
tm_shape(dat_map) +
tm_fill("T", palette = "Greens") +
tm_layout(legend.outside = TRUE, frame = FALSE)
tm_shape(dat_map) +
tm_fill("T", palette = "-Greens") +
tm_layout(legend.outside = TRUE, frame = FALSE)
tm_shape(dat_map) +
tm_fill("T", palette = "viridis") +
tm_layout(legend.outside = TRUE, frame = FALSE)
tm_shape(dat_map) +
tm_fill("T", palette = "viridis") +
tm_layout(legend.outside = TRUE, frame = FALSE) +
tm_text("province", size = "Shape_Area",  auto.placement = F, legend.size.show = FALSE)
tm_shape(dat_map) +
tm_fill("T", palette = "viridis") +
tm_layout(legend.outside = TRUE, frame = FALSE) +
tm_text("province", size = "Shape_Area",  auto.placement = F, legend.size.show = FALSE)  +
tm_scale_bar(position = c("RIGHT", "BOTTOM"))
tm_shape(dat_map) +
tm_fill("T",
style = "quantile",
palette = "Reds"
) +
tm_layout(
legend.outside = TRUE,
frame = FALSE)
tm_shape(dat_map) +
tm_fill("T",
style = "quantile",
n = 7,
palette = "Reds"
) +
tm_layout(
legend.outside = TRUE,
frame = FALSE)
tm_shape(dat_map) +
tm_fill("T",
style = "quantile",
n = 5,
palette = "YlOrBr",
legend.hist = TRUE
) +
tm_layout(
legend.outside = TRUE,
frame = FALSE)
tm_shape(dat_map) +
tm_fill("T",
style = "quantile",
palette = "Blues"
) +
tm_borders(alpha=.4) +
tm_layout(
legend.outside = TRUE,
frame = FALSE)
tm_shape(dat_map) +
tm_fill("T",
style = "quantile",
palette = "viridis"
) +
tm_borders(alpha=.4) +
tm_compass(type = "8star",
position = c("RIGHT", "BOTTOM"),
show.labels = 2,
text.size = 0.35) +
tm_layout(legend.outside = TRUE,
frame = FALSE)
tm_shape(dat_map) +
tm_fill("T",
palette = "viridis",
style = "quantile",
title = "Terrorist Attacks"
) +
tm_borders(alpha=.4) +
tm_layout(
legend.text.size = 0.7,
legend.title.size = 1,
legend.position = c("right", "bottom"),
legend.outside = TRUE,
frame = FALSE
)
tmap_mode("view")
tm_shape(dat_map) +
tm_fill("T",
palette = "viridis",
id="province",
popup.vars=c("T", "growth", "base", "E", "G")
) +
tm_legend(outside=TRUE) +
tm_layout(frame = FALSE)
tmap_mode("plot")
knitr::opts_chunk$set(echo = TRUE, warning=FALSE)
library(tidyverse)  # Modern data science workflow
library(sf)         # Simple features for R
library(tmap)       # Thematic Maps
library(tmaptools)  # Thematic Maps Tools
library(RColorBrewer) # ColorBrewer Palettes
library(leaflet)    # Interactive web maps
library(rgdal)      # Bindings for the Geospatial Data Abstraction Library
library(rgeos)      # Interface to Geometry Engine - Open Source
# Change the presentation of decimal numbers to 4 and avoid scientific notation
options(prompt="R> ", digits=4, scipen=999)
tm_shape(covid_map1) +
tm_polygons(c("case_chg", "rate_chg"), id = "province", palette=list("Reds", "Greens"), title=c("Change in number of cumulative cases (Mar to Jun)", "Change in rate of cumulative cases (Mar to Jun)")) +
tm_fill(style="kmeans") +
tm_layout(legend.title.size = 0.6,
legend.text.size = 0.5,
legend.position = c("left","bottom"))
knitr::opts_chunk$set(echo = TRUE, warning=FALSE)
library(tidyverse)  # Modern data science workflow
library(sf)         # Simple features for R
library(tmap)       # Thematic Maps
library(tmaptools)  # Thematic Maps Tools
library(RColorBrewer) # ColorBrewer Palettes
library(leaflet)    # Interactive web maps
library(rgdal)      # Bindings for the Geospatial Data Abstraction Library
library(rgeos)      # Interface to Geometry Engine - Open Source
# Change the presentation of decimal numbers to 4 and avoid scientific notation
options(prompt="R> ", digits=4, scipen=999)
library(readxl)
data <- read_excel("explore expandr.xlsx",
sheet = "Sheet1")
View(data)
df <- data %>% select(-c(4:7,9:12))
library(readr)
df_definitions <- read_delim("df_def.csv", ";", escape_double = FALSE,
trim_ws = TRUE)
df_definitions
map <- read_sf("province border.shp")
covid_map <- inner_join(
df,
map,
by = "ID"
)
covid_map
covid_map1 <- st_as_sf(covid_map)
tm_shape(covid_map1) +
tm_polygons(c("case_chg", "rate_chg"), id = "province", palette=list("Reds", "Greens"), title=c("Change in number of cumulative cases (Mar to Jun)", "Change in rate of cumulative cases (Mar to Jun)")) +
tm_fill(style="kmeans") +
tm_layout(legend.title.size = 0.6,
legend.text.size = 0.5,
legend.position = c("left","bottom"))
tm_shape(covid_map1) +
tm_polygons(c("job_loss", "mob_work"), id = "province", palette=list("Blues", "Reds"), title=c("Number of jobs affected", "Mobility to work compared to baseline")) +
tm_fill(style="kmeans") +
tm_layout(legend.title.size = 0.5,
legend.text.size = 0.4,
legend.position = c("left","bottom"))
tm_shape(covid_map1) +
tm_polygons(c("gdp_q2_yoy", "gdp_q2_qtq"), id = "province", palette=list("Reds", "Blues"), title=c("GDP growth Q2-2020 (yoy)", "GDP growth Q2-2020 (qtq)")) +
tm_fill(style="kmeans") +
tm_layout(legend.title.size = 0.6,
legend.text.size = 0.5,
legend.position = c("left","bottom"))
tm_shape(covid_map1) +
tm_polygons(c("gdp_q2_yoy", "THS_share_gdp"), id = "province", palette=list("Reds", "Blues"), title=c("GDP growth Q2-2020 (yoy)", "THS share to GDP (%)")) +
tm_fill(style="kmeans")+
tm_layout(legend.title.size = 0.6,
legend.text.size = 0.5,
legend.position = c("left","bottom"))
knitr::opts_chunk$set(echo = TRUE, warning=FALSE)
library(tidyverse)  # Modern data science workflow
library(sf)         # Simple features for R
library(tmap)       # Thematic Maps
library(tmaptools)  # Thematic Maps Tools
library(RColorBrewer) # ColorBrewer Palettes
library(leaflet)    # Interactive web maps
library(rgdal)      # Bindings for the Geospatial Data Abstraction Library
library(rgeos)      # Interface to Geometry Engine - Open Source
# Change the presentation of decimal numbers to 4 and avoid scientific notation
options(prompt="R> ", digits=4, scipen=999)
library(readxl)
data <- read_excel("explore expandr.xlsx",
sheet = "Sheet1")
View(data)
df <- data %>% select(-c(4:7,9:12))
library(readr)
df_definitions <- read_delim("df_def.csv", ";", escape_double = FALSE,
trim_ws = TRUE)
df_definitions
map <- read_sf("province border.shp")
covid_map <- inner_join(
df,
map,
by = "ID"
)
covid_map
covid_map1 <- st_as_sf(covid_map)
tm_shape(covid_map1) +
tm_polygons(c("case_chg", "rate_chg"), id = "province", palette=list("Reds", "Greens"), title=c("Change in number of cumulative cases (Mar to Jun)", "Change in rate of cumulative cases (Mar to Jun)")) +
tm_fill(style="kmeans") +
tm_layout(legend.title.size = 0.6,
legend.text.size = 0.5,
legend.position = c("left","bottom"))
tm_shape(covid_map1) +
tm_polygons(c("job_loss", "mob_work"), id = "province", palette=list("Blues", "Reds"), title=c("Number of jobs affected", "Mobility to work compared to baseline")) +
tm_fill(style="kmeans") +
tm_layout(legend.title.size = 0.5,
legend.text.size = 0.4,
legend.position = c("left","bottom"))
tm_shape(covid_map1) +
tm_polygons(c("gdp_q2_yoy", "gdp_q2_qtq"), id = "province", palette=list("Reds", "Blues"), title=c("GDP growth Q2-2020 (yoy)", "GDP growth Q2-2020 (qtq)")) +
tm_fill(style="kmeans") +
tm_layout(legend.title.size = 0.6,
legend.text.size = 0.5,
legend.position = c("left","bottom"))
tm_shape(covid_map1) +
tm_polygons(c("gdp_q2_yoy", "THS_share_gdp"), id = "province", palette=list("Reds", "Blues"), title=c("GDP growth Q2-2020 (yoy)", "THS share to GDP (%)")) +
tm_fill(style="kmeans")+
tm_layout(legend.title.size = 0.6,
legend.text.size = 0.5,
legend.position = c("left","bottom"))
tmap_mode("view")
tm_shape(covid_map1) +
tm_fill("gdp_q2_yoy",
palette = "viridis",
id="province",
popup.vars=c("case_chg", "rate_chg", "job_loss", "mob_work", "gdp_q2_yoy", "gdp_q2_qtq")) +
tm_borders(alpha=.4) +
tm_legend(outside=TRUE) +
tm_layout(frame = FALSE)
tmap_mode("plot")
tmap_mode("plot")
tm_shape(covid_map1) +
tm_fill("gdp_q2_yoy",
palette = "viridis",
id="province",
popup.vars=c("case_chg", "rate_chg", "job_loss", "mob_work", "gdp_q2_yoy", "gdp_q2_qtq")) +
tm_borders(alpha=.4) +
tm_legend(outside=TRUE) +
tm_layout(frame = FALSE)
tmap_mode("view")
tm_shape(covid_map1) +
tm_fill("gdp_q2_yoy",
palette = "viridis",
id="province",
popup.vars=c("case_chg", "rate_chg", "job_loss", "mob_work", "gdp_q2_yoy", "gdp_q2_qtq")) +
tm_borders(alpha=.4) +
tm_legend(outside=TRUE) +
tm_layout(frame = FALSE)
knitr::opts_chunk$set(echo = TRUE, warning=FALSE)
library(tidyverse)  # Modern data science workflow
library(sf)         # Simple features for R
library(tmap)       # Thematic Maps
library(tmaptools)  # Thematic Maps Tools
library(RColorBrewer) # ColorBrewer Palettes
library(leaflet)    # Interactive web maps
library(rgdal)      # Bindings for the Geospatial Data Abstraction Library
library(rgeos)      # Interface to Geometry Engine - Open Source
# Change the presentation of decimal numbers to 4 and avoid scientific notation
options(prompt="R> ", digits=4, scipen=999)
library(readxl)
data <- read_excel("explore expandr.xlsx",
sheet = "Sheet1")
View(data)
df <- data %>% select(-c(4:7,9:12))
library(readr)
df_definitions <- read_delim("df_def.csv", ";", escape_double = FALSE,
trim_ws = TRUE)
df_definitions
map <- read_sf("province border.shp")
covid_map <- inner_join(
df,
map,
by = "ID"
)
covid_map
covid_map1 <- st_as_sf(covid_map)
tm_shape(covid_map1) +
tm_polygons(c("case_chg", "rate_chg"), id = "province", palette=list("Reds", "Greens"), title=c("Change in number of cumulative cases (Mar to Jun)", "Change in rate of cumulative cases (Mar to Jun)")) +
tm_fill(style="kmeans") +
tm_layout(legend.title.size = 0.6,
legend.text.size = 0.5,
legend.position = c("left","bottom"))
tm_shape(covid_map1) +
tm_polygons(c("job_loss", "mob_work"), id = "province", palette=list("Blues", "Reds"), title=c("Number of jobs affected", "Mobility to work compared to baseline")) +
tm_fill(style="kmeans") +
tm_layout(legend.title.size = 0.5,
legend.text.size = 0.4,
legend.position = c("left","bottom"))
tm_shape(covid_map1) +
tm_polygons(c("gdp_q2_yoy", "gdp_q2_qtq"), id = "province", palette=list("Reds", "Blues"), title=c("GDP growth Q2-2020 (yoy)", "GDP growth Q2-2020 (qtq)")) +
tm_fill(style="kmeans") +
tm_layout(legend.title.size = 0.6,
legend.text.size = 0.5,
legend.position = c("left","bottom"))
tm_shape(covid_map1) +
tm_polygons(c("gdp_q2_yoy", "THS_share_gdp"), id = "province", palette=list("Reds", "Blues"), title=c("GDP growth Q2-2020 (yoy)", "THS share to GDP (%)")) +
tm_fill(style="kmeans")+
tm_layout(legend.title.size = 0.6,
legend.text.size = 0.5,
legend.position = c("left","bottom"))
knitr::opts_chunk$set(echo = TRUE, warning=FALSE)
library(tidyverse)  # Modern data science workflow
library(sf)         # Simple features for R
library(tmap)       # Thematic Maps
library(tmaptools)  # Thematic Maps Tools
library(RColorBrewer) # ColorBrewer Palettes
library(leaflet)    # Interactive web maps
library(rgdal)      # Bindings for the Geospatial Data Abstraction Library
library(rgeos)      # Interface to Geometry Engine - Open Source
# Change the presentation of decimal numbers to 4 and avoid scientific notation
options(prompt="R> ", digits=4, scipen=999)
knitr::opts_chunk$set(echo = TRUE, warning=FALSE)
library(tidyverse)  # Modern data science workflow
library(sf)         # Simple features for R
library(tmap)       # Thematic Maps
library(tmaptools)  # Thematic Maps Tools
library(RColorBrewer) # ColorBrewer Palettes
library(leaflet)    # Interactive web maps
library(rgdal)      # Bindings for the Geospatial Data Abstraction Library
library(rgeos)      # Interface to Geometry Engine - Open Source
# Change the presentation of decimal numbers to 4 and avoid scientific notation
options(prompt="R> ", digits=4, scipen=999)
library(readxl)
data <- read_excel("explore expandr.xlsx",
sheet = "Sheet1")
View(data)
df <- data %>% select(-c(4:7,9:12))
map <- read_sf("province border.shp")
covid_map <- inner_join(
df,
map,
by = "ID"
)
covid_map1 <- st_as_sf(covid_map)
tm_shape(covid_map1) +
tm_polygons(c("case_chg", "rate_chg"), id = "province", palette=list("Reds", "Greens"), title=c("Change in number of cumulative cases (Mar to Jun)", "Change in rate of cumulative cases (Mar to Jun)")) +
tm_fill(style="kmeans") +
tm_layout(legend.title.size = 0.6,
legend.text.size = 0.5,
legend.position = c("left","bottom"))
tm_shape(covid_map1) +
tm_polygons(c("job_loss", "mob_work"), id = "province", palette=list("Blues", "Reds"), title=c("Number of jobs affected", "Mobility to work compared to baseline")) +
tm_fill(style="kmeans") +
tm_layout(legend.title.size = 0.5,
legend.text.size = 0.4,
legend.position = c("left","bottom"))
tm_shape(covid_map1) +
tm_polygons(c("gdp_q2_yoy", "gdp_q2_qtq"), id = "province", palette=list("Reds", "Blues"), title=c("GDP growth Q2-2020 (yoy)", "GDP growth Q2-2020 (qtq)")) +
tm_fill(style="kmeans") +
tm_layout(legend.title.size = 0.6,
legend.text.size = 0.5,
legend.position = c("left","bottom"))
tm_shape(covid_map1) +
tm_polygons(c("gdp_q2_yoy", "THS_share_gdp"), id = "province", palette=list("Reds", "Blues"), title=c("GDP growth Q2-2020 (yoy)", "THS share to GDP (%)")) +
tm_fill(style="kmeans")+
tm_layout(legend.title.size = 0.6,
legend.text.size = 0.5,
legend.position = c("left","bottom"))
tmap_mode("view")
tm_shape(covid_map1) +
tm_fill("gdp_q2_yoy",
palette = "viridis",
id="province",
popup.vars=c("case_chg", "rate_chg", "job_loss", "mob_work", "gdp_q2_yoy", "gdp_q2_qtq")) +
tm_borders(alpha=.4) +
tm_legend(outside=TRUE) +
tm_layout(frame = FALSE)
tmap_mode("plot")
knitr::opts_chunk$set(echo = TRUE, warning=FALSE)
library(tidyverse)  # Modern data science workflow
library(sf)         # Simple features for R
library(tmap)       # Thematic Maps
library(tmaptools)  # Thematic Maps Tools
library(RColorBrewer) # ColorBrewer Palettes
library(leaflet)    # Interactive web maps
library(rgdal)      # Bindings for the Geospatial Data Abstraction Library
library(rgeos)      # Interface to Geometry Engine - Open Source
# Change the presentation of decimal numbers to 4 and avoid scientific notation
options(prompt="R> ", digits=4, scipen=999)
library(readxl)
data <- read_excel("explore expandr.xlsx",
sheet = "Sheet1")
View(data)
df <- data %>% select(-c(4:7,9:12))
library(readr)
df_definitions <- read_delim("df_def.csv", ";", escape_double = FALSE,
trim_ws = TRUE)
df_definitions
map <- read_sf("province border.shp")
covid_map <- inner_join(
df,
map,
by = "ID"
)
covid_map
covid_map1 <- st_as_sf(covid_map)
tm_shape(covid_map1) +
tm_polygons(c("case_chg", "rate_chg"), id = "province", palette=list("Reds", "Greens"), title=c("Change in number of cumulative cases (Mar to Jun)", "Change in rate of cumulative cases (Mar to Jun)")) +
tm_fill(style="kmeans") +
tm_layout(legend.title.size = 0.6,
legend.text.size = 0.5,
legend.position = c("left","bottom"))
tm_shape(covid_map1) +
tm_polygons(c("job_loss", "mob_work"), id = "province", palette=list("Blues", "Reds"), title=c("Number of jobs affected", "Mobility to work compared to baseline")) +
tm_fill(style="kmeans") +
tm_layout(legend.title.size = 0.5,
legend.text.size = 0.4,
legend.position = c("left","bottom"))
tm_shape(covid_map1) +
tm_polygons(c("gdp_q2_yoy", "gdp_q2_qtq"), id = "province", palette=list("Reds", "Blues"), title=c("GDP growth Q2-2020 (yoy)", "GDP growth Q2-2020 (qtq)")) +
tm_fill(style="kmeans") +
tm_layout(legend.title.size = 0.6,
legend.text.size = 0.5,
legend.position = c("left","bottom"))
tm_shape(covid_map1) +
tm_polygons(c("gdp_q2_yoy", "THS_share_gdp"), id = "province", palette=list("Reds", "Blues"), title=c("GDP growth Q2-2020 (yoy)", "THS share to GDP (%)")) +
tm_fill(style="kmeans")+
tm_layout(legend.title.size = 0.6,
legend.text.size = 0.5,
legend.position = c("left","bottom"))
tmap_mode("view")
tm_shape(covid_map1) +
tm_fill("gdp_q2_yoy",
palette = "viridis",
id="province",
popup.vars=c("case_chg", "rate_chg", "job_loss", "mob_work", "gdp_q2_yoy", "gdp_q2_qtq")) +
tm_borders(alpha=.4) +
tm_legend(outside=TRUE) +
tm_layout(frame = FALSE)
tmap_mode("plot")
tmap_mode("view")
tm_shape(covid_map1) +
tm_fill("gdp_q2_yoy",
palette = "viridis",
id="province",
popup.vars=c("case_chg", "rate_chg", "job_loss", "mob_work", "gdp_q2_yoy", "gdp_q2_qtq")) +
tm_borders(alpha=.4) +
tm_legend(outside=TRUE) +
tm_layout(frame = FALSE)
tmap_mode("plot")
tm_shape(covid_map1) +
tm_polygons(c("case_chg", "rate_chg"), id = "province", palette=list("Reds", "Greens"), title=c("Change in number of cumulative cases (Mar to Jun)", "Change in rate of cumulative cases (Mar to Jun)")) +
tm_fill(style="kmeans") +
tm_layout(legend.title.size = 0.6,
legend.text.size = 0.5,
legend.position = c("left","bottom"))
tm_shape(covid_map1) +
tm_polygons(c("job_loss", "mob_work"), id = "province", palette=list("Blues", "Reds"), title=c("Number of jobs affected", "Mobility to work compared to baseline")) +
tm_fill(style="kmeans") +
tm_layout(legend.title.size = 0.5,
legend.text.size = 0.4,
legend.position = c("left","bottom"))
tm_shape(covid_map1) +
tm_polygons(c("gdp_q2_yoy", "gdp_q2_qtq"), id = "province", palette=list("Reds", "Blues"), title=c("GDP growth Q2-2020 (yoy)", "GDP growth Q2-2020 (qtq)")) +
tm_fill(style="kmeans") +
tm_layout(legend.title.size = 0.6,
legend.text.size = 0.5,
legend.position = c("left","bottom"))
tm_shape(covid_map1) +
tm_polygons(c("gdp_q2_yoy", "THS_share_gdp"), id = "province", palette=list("Reds", "Blues"), title=c("GDP growth Q2-2020 (yoy)", "THS share to GDP (%)")) +
tm_fill(style="kmeans")+
tm_layout(legend.title.size = 0.6,
legend.text.size = 0.5,
legend.position = c("left","bottom"))
tmap_mode("view")
tm_shape(covid_map1) +
tm_fill("gdp_q2_yoy",
palette = "viridis",
id="province",
popup.vars=c("case_chg", "rate_chg", "job_loss", "mob_work", "gdp_q2_yoy", "gdp_q2_qtq")) +
tm_borders(alpha=.4) +
tm_legend(outside=TRUE) +
tm_layout(frame = FALSE)
tmap_mode("plot")
tm_shape(covid_map1) +
tm_fill("gdp_q2_yoy",
palette = "viridis",
id="province",
popup.vars=c("case_chg", "rate_chg", "job_loss", "mob_work", "gdp_q2_yoy", "gdp_q2_qtq")) +
tm_borders(alpha=.4) +
tm_legend(outside=TRUE) +
tm_layout(frame = FALSE)
tmap_mode("plot")
tmap_mode("view")
tm_shape(covid_map1) +
tm_fill("gdp_q2_yoy",
palette = "viridis",
id="province",
popup.vars=c("case_chg", "rate_chg", "job_loss", "mob_work", "gdp_q2_yoy", "gdp_q2_qtq")) +
tm_borders(alpha=.4) +
tm_legend(outside=TRUE) +
tm_layout(frame = FALSE)
tmap_mode("plot")
tmap_mode("view")
tm_shape(covid_map1) +
tm_fill("gdp_q2_yoy",
palette = "viridis",
id="province",
popup.vars=c("case_chg", "rate_chg", "job_loss", "mob_work", "gdp_q2_yoy", "gdp_q2_qtq")) +
tm_legend(outside=TRUE) +
tm_layout(frame = FALSE)
tmap_mode("plot")
